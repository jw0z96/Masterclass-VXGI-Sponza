%%% template.tex
%%%
%%% This LaTeX source document can be used as the basis for your technical
%%% paper or abstract. Intentionally stripped of annotation, the parameters
%%% and commands should be adjusted for your particular paper - title,
%%% author, article DOI, etc.
%%% The accompanying ``template.annotated.tex'' provides copious annotation
%%% for the commands and parameters found in the source document. (The code
%%% is identical in ``template.tex'' and ``template.annotated.tex.'')

\documentclass[]{acmsiggraph}
\usepackage{algorithm}
\usepackage[noend]{algpseudocode}
\TOGonlineid{45678}
\TOGvolume{0}
\TOGnumber{0}
\TOGarticleDOI{0}
\TOGprojectURL{}
\TOGvideoURL{}
\TOGdataURL{}
\TOGcodeURL{}
\usepackage{color}
%\definecolor{red}{rgb}{0.9, 0.17, 0.31}
\usepackage{multirow}
\usepackage{subfig}
\usepackage{xcolor}
\usepackage{lipsum}
\usepackage{listings}
\usepackage{graphicx}
\usepackage{glsllst} % My own package providing markup listing for glsl
\usepackage{rmlst}   % My own package providing markup listing for renderman
\usepackage{amsmath}
\usepackage{hyperref}

\lstset{
	backgroundcolor=\color[rgb]{0.95, 0.95, 0.95},
	tabsize=3,
	%rulecolor=,
	basicstyle=\footnotesize\ttfamily,
	upquote=true,
	aboveskip={1.5\baselineskip},
	columns=fixed,
	showstringspaces=false,
	extendedchars=true,
	breaklines=true,
	prebreak = \raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
	frame=none,
	aboveskip=15pt,
	belowskip=8pt,
	captionpos=t,
	showtabs=false,
	showspaces=false,
	showstringspaces=false,
	identifierstyle=\ttfamily,
	%keywordstyle=\color{red}\bfseries,
	%keywordstyle=[1]\bfseries\color{syntaxBlue},
	%keywordstyle=[2]\bfseries\color{syntaxRed},
	%keywordstyle=[3]\color{blue}\bfseries,
	%keywordstyle=[4]\bfseries\color{syntaxBlue},
	commentstyle=\color[rgb]{0.082,0.639,0.082},
	keywordstyle=[1]\bfseries\color[rgb]{0,0,0.75},
	keywordstyle=[2]\bfseries\color[rgb]{0.5,0.0,0.0},
	keywordstyle=[3]\bfseries\color[rgb]{0.127,0.427,0.514},
	keywordstyle=[4]\bfseries\color[rgb]{0.4,0.4,0.4},
	stringstyle=\color[rgb]{0.639,0.082,0.082},
}

\title{Masterclass Assignment Documentation}

\author{Joe Withers\thanks{e-mail:joewithers96@gmail.com}}
\pdfauthor{Joe Withers}

\keywords{rendering}

\begin{document}

%% \teaser{
%%   \includegraphics[height=1.5in]{images/sampleteaser}
%%   \caption{Spring Training 2009, Peoria, AZ.}
%% }

\maketitle

\section{Approach}

\section{Results}

\begin{figure}[htbp]\centering
 \includegraphics[width=1.0\linewidth]{images/full_render_01.png}
 \includegraphics[width=1.0\linewidth]{images/full_render_02.png}
 \includegraphics[width=1.0\linewidth]{images/full_render_03.png}
 \caption{\label{fig:reference}Three screenshots showing the full scene with a voxel resolution of 512^3.}
\end{figure}

\begin{figure}[htbp]\centering
 \includegraphics[width=1.0\linewidth]{images/direct_only.png}
 \caption{\label{fig:reference}A screenshot showing just the direct lighting pass.}
\end{figure}

\begin{figure}[htbp]\centering
 \includegraphics[width=1.0\linewidth]{images/indirect_only.png}
 \caption{\label{fig:reference}A screenshot showing just the indirect lighting pass.}
\end{figure}

\begin{figure}[htbp]\centering
 \includegraphics[width=1.0\linewidth]{images/reflection_only.png}
 \caption{\label{fig:reference}A screenshot showing just the reflection pass.}
\end{figure}

\begin{figure}[htbp]\centering
 \includegraphics[width=1.0\linewidth]{images/reflection_only_no_roughness.png}
 \caption{\label{fig:reference}A screenshot showing just the reflection pass, but with the minimum cone angle.}
\end{figure}

\section{Future Improvements}

Unfortunately I wasn't able to implement a sparse data structure as described in the source material\cite{crassin_neyret_sainz_green_eisemann_2011} before the assignment deadline. Having a sparse data structure to store the emissive voxel texture would save a significant amount of GPU memory consumption, allowing the resolution for voxelization to be much higher; currently dense 3D textures it is capable of hitting the 2 gigabyte memory limit of my GPU.

The speed at which lighting rays are marched during the light injection pass would also be improved, as it would be able to step further through the voxel texture whilst ray marching if the higher levels in the octree are known to be empty.

I did start working on a sparse voxel octree as described in OpenGL Insights\cite{crassin_green_2012} by using an OpenGL Atomic Counter for calculating the number of fragments needed for the voxel fragment list, and I believe I understand the technique well enough should I wish to implement it in the future.

The source material\cite{crassin_neyret_sainz_green_eisemann_2011} also describes a method for anisotropic mip-mapping of the 3D texture, storing a version of the texture for each directional axis, which improves visual accuracy when cone tracing. Whilst I could have implemented this with the dense 3D textures I was using, I opted to use OpenGL's built in mip-mapping to save time.

\begin{figure}[htbp]\centering
 \includegraphics[width=1.0\linewidth]{images/banding.png}
 \caption{\label{fig:reference}A screenshot showing banding artefacts in the reflection pass.}
\end{figure}

\begin{figure}[htbp]\centering
 \includegraphics[width=1.0\linewidth]{images/indirect_noise.png}
 \caption{\label{fig:reference}A screenshot showing noise in the indirect lighting.}
\end{figure}

\begin{figure}[htbp]\centering
 \includegraphics[width=1.0\linewidth]{images/voxelization_error.png}
 \caption{\label{fig:reference}A screenshot showing voxelization artefacts.}
\end{figure}

\bibliographystyle{plain}
\bibliography{references}

\end{document}
